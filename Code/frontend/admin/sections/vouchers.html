<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Voucher Management</title>
  <link rel="stylesheet" href="css/vouchers.css">
</head>
<body>
  <div class="section-container">
    <h2>Voucher Management</h2>

    <!-- Add New Voucher Form -->
    <form id="add-voucher-form">
      <h3>Add New Voucher</h3>
      <input type="text" name="code" placeholder="Voucher Code" required>
      
      <select name="type" id="voucher-type" required>
        <option value="">Select Type</option>
        <option value="discount">Discount</option>
        <option value="free_shipping">Free Shipping</option>
      </select>

      <select name="discount_type" id="discount-type">
        <option value="">Discount Type</option>
        <option value="percent">Percent</option>
        <option value="fixed">Fixed</option>
      </select>

      <input type="number" step="0.01" name="discount_value" id="discount-value" placeholder="Discount Value">

      <input type="number" name="usage_limit" placeholder="Usage Limit">
      <input type="date" name="start_date" placeholder="Start Date">
      <input type="date" name="end_date" placeholder="End Date">

      <button type="submit">Add Voucher</button>
    </form>

    <!-- Voucher Table -->
    <div class="table-responsive">
      <table id="voucher-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Code</th>
            <th>Type</th>
            <th>Discount</th>
            <th>Usage</th>
            <th>Active</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Edit Voucher Modal -->
  <div id="edit-voucher-modal" class="modal" style="display:none;">
    <div class="modal-content">
      <span id="close-modal" class="close">&times;</span>
      <h3>Edit Voucher</h3>
      <form id="edit-voucher-form">
        <input type="hidden" name="voucher_id" id="edit-voucher-id">
        
        <label>Code:</label>
        <input type="text" name="code" id="edit-code" required>

        <label>Type:</label>
        <select name="type" id="edit-type" required>
          <option value="discount">Discount</option>
          <option value="free_shipping">Free Shipping</option>
        </select>

        <label>Discount Type:</label>
        <select name="discount_type" id="edit-discount-type">
          <option value="">Discount Type</option>
          <option value="percent">Percent</option>
          <option value="fixed">Fixed</option>
        </select>

        <label>Discount Value:</label>
        <input type="number" step="0.01" name="discount_value" id="edit-discount-value">

        <label>Usage Limit:</label>
        <input type="number" name="usage_limit" id="edit-usage-limit">

        <label>Start Date:</label>
        <input type="date" name="start_date" id="edit-start-date">

        <label>End Date:</label>
        <input type="date" name="end_date" id="edit-end-date">

        <label>Active:</label>
        <input type="checkbox" name="is_active" id="edit-is-active">

        <button type="submit">Save Changes</button>
      </form>
    </div>
  </div>

  <!-- Customer Select Modal -->
<div id="customer-modal" class="modal" style="display:none;">
  <div class="modal-content">
    <span id="close-customer-modal" class="close">&times;</span>
    <h3>Select Customer to Send Voucher</h3>
    <table id="customer-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<style>
/* vouchers.css */

/* General modal styling */
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6); /* overlay */
  justify-content: center;
  align-items: center;
  overflow: auto;
}

.modal-content {
  background: #fff;
  padding: 20px;
  border-radius: 8px;
  width: 80%;            
  max-width: 1000px;    
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  overflow-x: auto;   
}

.modal .close {
  float: right;
  font-size: 22px;
  cursor: pointer;
}
</styles>


  <script>
    // Hide discount fields if type is free_shipping
    const voucherType = document.getElementById("voucher-type");
    const discountType = document.getElementById("discount-type");
    const discountValue = document.getElementById("discount-value");

    voucherType.addEventListener("change", () => {
      if (voucherType.value === "free_shipping") {
        discountType.disabled = true;
        discountValue.disabled = true;
        discountType.value = "";
        discountValue.value = "";
      } else {
        discountType.disabled = false;
        discountValue.disabled = false;
      }
    });
  </script>
</body>
</html>
